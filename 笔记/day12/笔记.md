# 设置角色的权限

## 弹窗

![](笔记.assets/2022-06-27-09-51-36-image.png)

## 回显数据

### 所有的权限列表树形显示多选框

![](笔记.assets/2022-06-27-09-52-01-image.png)

![](笔记.assets/2022-06-27-09-52-59-image.png)

### 回显点击角色旧有权限列表

![](笔记.assets/2022-06-27-10-13-56-image.png)

### 确定请求

![](笔记.assets/2022-06-27-10-20-10-image.png)

![](笔记.assets/2022-06-27-10-20-27-image.png)

![](笔记.assets/2022-06-27-10-48-42-image.png)

![](笔记.assets/2022-06-27-10-49-25-image.png)

# RBAC

是一个后端的数据管理逻辑

员工增删改查

角色增删改查

权限增删改查

设置员工的角色

设置角色的权限

后端通过 孙财员工=>人事经理角色=>查看员工管理权限

推断出孙财员工拥有查看员工管理权限

然后将所有拥有的权限标记, 在你登录时个人数据中回传

![](笔记.assets/2022-06-27-11-26-13-image.png)

# 权限数据控制页面访问

后端帮助我们将所有权限标记已经放在了个人数据中, 接下来, 我们的需求是, 根据当前登录个人的权限列表, 控制他能访问的页面

## 分离静态和动态路由

如果默认谁都能看的页面叫做静态路由, 只有有权限得人才能看, 叫做动态路由

人资当中, 路由的配置直接决定了菜单的显示, 所以现在我们只能把谁都可以看的那些路由留在配置当中

![](笔记.assets/2022-06-27-12-01-11-image.png)

## 筛选当前用户能够看的页面

我们现在有个人的权限列表, 希望通过这个来筛选出可以看见的页面, 可以通过给每个路由一个 name 属性, 规定name属性应该跟权限标记一样 后续做筛选的时候, 如果那么存在于个人权限数组, 就可以被查看, 不存在就不能查看

### 给每个路由添加 name 作为筛选依据

![](笔记.assets/2022-06-27-12-09-38-image.png)

### 筛选基本逻辑测试

![](笔记.assets/2022-06-27-12-21-42-image.png)

![](笔记.assets/2022-06-27-12-22-57-image.png)

## 根据筛选结果恢复菜单和页面访问

### 导航守卫调用 action 进行筛选

![](笔记.assets/2022-06-27-16-11-48-image.png)

![](笔记.assets/2022-06-27-16-12-01-image.png)

### 恢复菜单显示

![](笔记.assets/2022-06-27-16-12-59-image.png)

![](笔记.assets/2022-06-27-16-13-53-image.png)

### 追加路由配置页面恢复访问

![](笔记.assets/2022-06-27-16-45-45-image.png)

![](笔记.assets/2022-06-27-16-46-27-image.png)

## 解决一些小 bug

刷新404

刷新空白

![](笔记.assets/2022-06-27-18-24-40-image.png)

# 权限页面控制按钮点击

## 基本逻辑

![](笔记.assets/2022-06-27-18-06-24-image.png)

![](笔记.assets/2022-06-27-18-07-05-image.png)

# mixin 混入技术

![](笔记.assets/2022-06-27-18-26-11-image.png)
